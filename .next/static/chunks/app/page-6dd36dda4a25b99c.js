(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4095:function(e,t,r){Promise.resolve().then(r.bind(r,7861))},3699:function(e,t,r){"use strict";r.d(t,{y:function(){return l}});var n=r(7437),a=r(9501);function l(e){let{form:t,onSubmit:r,children:l,className:o=""}=e;return(0,n.jsx)(a.RV,{...t,children:(0,n.jsx)("form",{onSubmit:t.handleSubmit(r),className:o,children:l})})}},2721:function(e,t,r){"use strict";r.d(t,{t:function(){return b}});var n=r(7437),a=r(2265),l=r(7495),o=r(9501),s=r(4508),i=r(6394);let u=(0,r(535).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(i.f,{ref:t,className:(0,s.cn)(u(),r),...a})});d.displayName=i.f.displayName;let c=a.createContext({}),f=e=>{let{...t}=e;return(0,n.jsx)(c.Provider,{value:{name:t.name},children:(0,n.jsx)(o.Qr,{...t})})},m=()=>{let e=a.useContext(c),t=a.useContext(p),{getFieldState:r,formState:n}=(0,o.Gc)(),l=r(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:s}=t;return{id:s,name:e.name,formItemId:"".concat(s,"-form-item"),formDescriptionId:"".concat(s,"-form-item-description"),formMessageId:"".concat(s,"-form-item-message"),...l}},p=a.createContext({}),g=a.forwardRef((e,t)=>{let{className:r,...l}=e,o=a.useId();return(0,n.jsx)(p.Provider,{value:{id:o},children:(0,n.jsx)("div",{ref:t,className:(0,s.cn)("space-y-2",r),...l})})});g.displayName="FormItem";let h=a.forwardRef((e,t)=>{let{className:r,...a}=e,{error:l,formItemId:o}=m();return(0,n.jsx)(d,{ref:t,className:(0,s.cn)(l&&"text-destructive",r),htmlFor:o,...a})});h.displayName="FormLabel";let x=a.forwardRef((e,t)=>{let{...r}=e,{error:a,formItemId:o,formDescriptionId:s,formMessageId:i}=m();return(0,n.jsx)(l.g7,{ref:t,id:o,"aria-describedby":a?"".concat(s," ").concat(i):"".concat(s),"aria-invalid":!!a,...r})});x.displayName="FormControl",a.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:l}=m();return(0,n.jsx)("p",{ref:t,id:l,className:(0,s.cn)("text-[0.8rem] text-muted-foreground",r),...a})}).displayName="FormDescription";let y=a.forwardRef((e,t)=>{var r;let{className:a,children:l,...o}=e,{error:i,formMessageId:u}=m(),d=i?String(null!==(r=null==i?void 0:i.message)&&void 0!==r?r:""):l;return d?(0,n.jsx)("p",{ref:t,id:u,className:(0,s.cn)("text-[0.8rem] font-medium text-destructive",a),...o,children:d}):null});y.displayName="FormMessage";let v=a.forwardRef((e,t)=>{let{className:r,type:a,...l}=e;return(0,n.jsx)("input",{type:a,className:(0,s.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...l})});function b(e){let{name:t,label:r,placeholder:l,type:i="text",className:u,disabled:d}=e,{control:c}=(0,o.Gc)();return(0,n.jsx)(f,{control:c,name:t,render:e=>{let{field:t}=e,o=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=o.current;e&&(e.style.height="auto",e.style.height=e.scrollHeight+"px")},[t.value]);let c=(0,s.cn)("rounded-xl border-emerald-500 bg-[#0A0D14] py-4 text-white placeholder-gray-400",u);return(0,n.jsxs)(g,{children:[r&&(0,n.jsx)(h,{children:r}),(0,n.jsx)(x,{children:"textarea"===i?(0,n.jsx)("textarea",{...t,ref:e=>{t.ref(e),o.current=e},placeholder:l,disabled:d,rows:3,className:(0,s.cn)(c,"resize-none w-full p-2"),onInput:e=>{let r=e.target;r.style.height="auto",r.style.height=r.scrollHeight+"px",t.onChange(r.value)}}):(0,n.jsx)(v,{...t,type:i,placeholder:l,disabled:d,className:c})}),(0,n.jsx)(y,{})]})}})}v.displayName="Input"},7861:function(e,t,r){"use strict";r.d(t,{default:function(){return y}});var n=r(7437),a=r(9501),l=r(6900),o=r(3590),s=r(2265),i=r(4438),u=r(9376),d=r(386),c=r(2869),f=r(473),m=r(9116),p=r(3699),g=r(2721),h=r(6070);let x=l.Ry({email:l.Z_().email("Invalid email address"),password:l.Z_().min(6,"Password must be at least 6 characters"),otp:l.Z_().optional()});function y(){let[e,t]=(0,s.useState)(!1),[r,l]=(0,s.useState)(!1),y=(0,d.I0)(),v=(0,u.useRouter)(),b=(0,a.cI)({resolver:(0,o.F)(x),defaultValues:{email:"",password:""}}),w=async e=>{try{t(!0);let{responseData:r}=await (0,m.v_)("/api/auth/login",{...e,userType:"user"},{withCredentials:!0});if(r.require_otp)l(!0),i.A.info("OTP sent. Please enter it to continue.");else{let{user:e,accessToken:t}=r;y((0,f.Dj)({token:t,user:e})),i.A.success("Logged in successfully!",{duration:800}),v.refresh()}}catch(e){i.A.error("Login failed. Check your credentials and try again.")}finally{t(!1)}};return(0,n.jsxs)(h.Zb,{className:"w-72 space-y-4 p-8",children:[(0,n.jsx)("h1",{className:"text-xl font-semibold text-center",children:"Admin Login"}),(0,n.jsxs)(p.y,{form:b,onSubmit:w,className:"space-y-4",children:[(0,n.jsx)(g.t,{name:"email",label:"Email",type:"email",placeholder:"Enter your email",disabled:r}),(0,n.jsx)(g.t,{name:"password",label:"Password",type:"password",placeholder:"Enter your password",disabled:r}),r&&(0,n.jsx)(g.t,{name:"otp",label:"OTP",type:"text",placeholder:"Enter OTP"}),(0,n.jsx)(c.z,{type:"submit",className:"w-full bg-emerald-500 text-black hover:bg-emerald-400",disabled:e,children:e?"Loading...":"Login"})]})]})}},2869:function(e,t,r){"use strict";r.d(t,{z:function(){return u}});var n=r(7437),a=r(2265),l=r(7495),o=r(535),s=r(4508);let i=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-background shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-primary text-primary bg-background shadow-sm hover:text-accent-foreground hover:border-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=a.forwardRef((e,t)=>{let{className:r,variant:a,size:o,asChild:u=!1,...d}=e,c=u?l.g7:"button";return(0,n.jsx)(c,{className:(0,s.cn)(i({variant:a,size:o,className:r})),ref:t,...d})});u.displayName="Button"},6070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return s},Zb:function(){return o},aY:function(){return u},ll:function(){return i}});var n=r(7437),a=r(2265),l=r(4508);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...a})});o.displayName="Card";let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...a})});s.displayName="CardHeader";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("font-semibold leading-none tracking-tight",r),...a})});i.displayName="CardTitle",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})}).displayName="CardDescription";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...a})});u.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},9116:function(e,t,r){"use strict";r.d(t,{U2:function(){return d},v_:function(){return c}});var n=r(3464),a=r(26);let l=r(257).env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:8000/",o=n.default.create({baseURL:l,timeout:1e5,headers:{"Content-Type":"application/json"}}),s=()=>a.h.getState().user.token||null,i=()=>{let e=a.h.getState().info||{};return{latitude:e.latitude||"",longitude:e.longitude||"",browser:e.browser||"",device:e.device||"",ip:e.ip||""}},u=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{let a=s(),l=i(),u={...n.headers,clientInfo:JSON.stringify(l)};a&&(u.Authorization="Bearer ".concat(a));let d={method:e,url:t,...n,headers:u};null!==r&&["post","put","patch"].includes(e.toLowerCase())&&(d.data=r),null!==r&&"get"===e.toLowerCase()&&(d.params=r);try{return(await o(d)).data}catch(e){throw console.log(e),e}}catch(e){throw console.error("API call failed:",e),e}},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u("get",e,t,r)},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u("post",e,t,r)}},4508:function(e,t,r){"use strict";r.d(t,{R:function(){return s},cn:function(){return l},p:function(){return o}});var n=r(1994),a=r(3335);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}let o=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(t)},s=e=>{if(!e)return"---";let t=new Date(e),r=e=>e.toString().padStart(2,"0"),n=r(t.getDate()),a=r(t.getMonth()+1),l=t.getFullYear(),o=r(t.getHours()),s=r(t.getMinutes()),i=r(t.getSeconds());return"".concat(n,"/").concat(a,"/").concat(l," ").concat(o,":").concat(s,":").concat(i)}},26:function(e,t,r){"use strict";let n;r.d(t,{D:function(){return v},h:function(){return y}});var a,l=r(2032),o=r(301),s=r(2577),i=r(473);let u=(0,o.oM)({name:"info",initialState:{latitude:null,longitude:null,ip:null,browser:null,device:null,userAgent:null,platform:null,language:null,cookiesEnabled:null,javascriptEnabled:null,touchSupport:null,deviceType:null,cpuCores:null,memory:null,screenSize:null,batteryLevel:null,isCharging:null,gpuRenderer:null,cameras:null,microphones:null,publicIp:null,isp:null,asn:null,city:null,country:null,possibleIoT:null},reducers:{setInfo:(e,t)=>({...e,...t.payload})}}),{setInfo:d}=u.actions;var c=u.reducer,f=r(9116);let m=(0,o.hg)("wallet/fetchBalance",async(e,t)=>{try{let e=await (0,f.U2)("/api/payments/getWalletBalance"),t=await (0,f.U2)("/api/payments/isTxnPending");return{...e.responseData,isPendingTxn:t.responseData.isPendingTxn}}catch(e){var r;return t.rejectWithValue((null===(r=e.response)||void 0===r?void 0:r.data)||"Unknown error")}}),p=(0,o.oM)({name:"wallet",initialState:{loading:!0,error:null,balance:0,isPendingTxn:!1},reducers:{setBalance:(e,t)=>{e.balance=t.payload}},extraReducers:e=>{e.addCase(m.pending,e=>{e.loading=!0,e.error=null}).addCase(m.fulfilled,(e,t)=>{var r,n;e.loading=!1,e.balance=Number(t.payload.balance),e.lastSuccessTxnDate=null===(r=t.payload.last_successful_transaction)||void 0===r?void 0:r.created_at,e.lastSuccessTxnAmount=null===(n=t.payload.last_successful_transaction)||void 0===n?void 0:n.amount,e.isPendingTxn=t.payload.isPendingTxn}).addCase(m.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"Failed to fetch balance"})}}),{setBalance:g}=p.actions;var h=p.reducer;n=r(9090).Z;let x=(a=(0,l.UY)({user:i.ZP,info:c,wallet:h}),n?(0,s.OJ)({key:"root",storage:n,whitelist:["user","info"]},a):a),y=(0,o.xC)({reducer:x,middleware:e=>e({serializableCheck:!1})}),v=(0,s.p5)(y)},473:function(e,t,r){"use strict";r.d(t,{Dj:function(){return u},kS:function(){return c}});var n=r(301),a=r(1614);let l=(0,a.getCookie)("accessToken"),o=(0,a.getCookie)("user"),s={token:"string"==typeof l?JSON.parse(l):null,user:"string"==typeof o?JSON.parse(o):null},i=(0,n.oM)({name:"user",initialState:s,reducers:{setCredentials:(e,t)=>{e.token=t.payload.token,e.user=t.payload.user,(0,a.setCookie)("accessToken",JSON.stringify(t.payload.token||null),{maxAge:86400,path:"/"}),(0,a.setCookie)("user",JSON.stringify(t.payload.user||null),{maxAge:864e3,path:"/"})},setPhone:(e,t)=>{e.user&&(e.user.phone=t.payload,(0,a.setCookie)("user",JSON.stringify(e.user),{maxAge:864e3,path:"/"}))},logout:e=>{e.token=null,e.user=null,(0,a.deleteCookie)("accessToken"),(0,a.deleteCookie)("user")}}}),{setCredentials:u,setPhone:d,logout:c}=i.actions;t.ZP=i.reducer},6840:function(e,t,r){"use strict";r.d(t,{WV:function(){return s},jH:function(){return i}});var n=r(2265),a=r(4887),l=r(7495),o=r(7437),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,l.Z8)(`Primitive.${t}`),a=n.forwardRef((e,n)=>{let{asChild:a,...l}=e,s=a?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,o.jsx)(s,{...l,ref:n})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function i(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}}},function(e){e.O(0,[672,330,250,971,117,744],function(){return e(e.s=4095)}),_N_E=e.O()}]);